<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>⚽ Apuestas PRO</title>

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0f0f0f" />
  <link rel="stylesheet" href="styles.css" />

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="icon-192x192.png" />
</head>
<body>
  <header class="topbar">
    <h1>⚽ Apuestas PRO</h1>
    <div id="status" class="statusline">
      API-Football: <span id="apiStatus" class="offline">Offline</span> |
      Odds: <span id="oddsStatus" class="offline">Offline</span>
    </div>
  </header>

  <!-- Navegación -->
  <nav class="tabs">
    <button id="tab-inicio" class="active">🏠 Inicio</button>
    <button id="tab-picks">📝 Mis Picks</button>
  </nav>

  <!-- ============== INICIO ============== -->
  <section id="inicio" class="section" style="display:block;">
    <h3>⚽ Buscar partidos</h3>

    <label class="lbl">Competición</label>
    <select id="ligaSelect" class="control"></select>

    <label class="lbl">Fecha</label>
    <input id="dateInput" class="control" type="date" />

    <button id="btnBuscar" class="btn primary">🔍 Buscar</button>

    <div id="partidosContainer" class="cards"></div>
  </section>

  <!-- ============== MIS PICKS ============== -->
  <section id="picks" class="section" style="display:none;">
    <h3>✍️ Crear pick manual</h3>

    <input id="mpHome" class="control" type="text" placeholder="Equipo local" />
    <input id="mpAway" class="control" type="text" placeholder="Equipo visitante" />

    <!-- 📊 Mercados -->
    <div class="market-group">
      <label>1X2 (Ganador)</label>
      <input class="market-input" id="odd_home" type="number" step="0.01" placeholder="Cuota Local" />
      <input class="market-input" id="odd_draw" type="number" step="0.01" placeholder="Cuota Empate" />
      <input class="market-input" id="odd_away" type="number" step="0.01" placeholder="Cuota Visitante" />
    </div>

    <div class="market-group">
      <label>Más / Menos 2.5 goles</label>
      <input class="market-input" id="odd_over" type="number" step="0.01" placeholder="Más de 2.5" />
      <input class="market-input" id="odd_under" type="number" step="0.01" placeholder="Menos de 2.5" />
    </div>

    <div class="market-group">
      <label>Ambos marcan</label>
      <input class="market-input" id="odd_btts_yes" type="number" step="0.01" placeholder="Sí" />
      <input class="market-input" id="odd_btts_no" type="number" step="0.01" placeholder="No" />
    </div>

    <button id="btnAddPick" class="btn primary">+ Añadir Pick</button>

    <h3 style="margin-top:18px;">⭐ Tus Picks</h3>
    <input id="searchPicks" class="control" type="text" placeholder="Buscar por equipo o mercado..." />
    <ul id="listaPicks" class="list"></ul>

    <div class="row">
      <button id="btnExportar" class="btn">📤 Exportar</button>
      <button id="btnClearPicks" class="btn secondary">🧹 Limpiar</button>
    </div>
  </section>

  <!-- Floating Action Buttons -->
  <div id="fabContainer">
    <button id="fabRefresh" class="fab">🔄</button>
    <button id="fabGoPicks" class="fab">⭐</button>
  </div>

  <!-- ============== MODAL NUEVO PICK DESDE PARTIDO ============== -->
  <div id="modalPick" class="modal">
    <div class="modal-content">
      <h3>➕ Crear pick</h3>
      <p><strong id="modalEquipos"></strong></p>

      <!-- Campos de mercados -->
      <div class="market-group">
        <label>1X2 (Ganador)</label>
        <input class="market-input" id="m_odd_home" type="number" step="0.01" placeholder="Cuota Local" />
        <input class="market-input" id="m_odd_draw" type="number" step="0.01" placeholder="Cuota Empate" />
        <input class="market-input" id="m_odd_away" type="number" step="0.01" placeholder="Cuota Visitante" />
      </div>

      <div class="market-group">
        <label>Más / Menos 2.5 goles</label>
        <input class="market-input" id="m_odd_over" type="number" step="0.01" placeholder="Más de 2.5" />
        <input class="market-input" id="m_odd_under" type="number" step="0.01" placeholder="Menos de 2.5" />
      </div>

      <div class="market-group">
        <label>Ambos marcan</label>
        <input class="market-input" id="m_odd_btts_yes" type="number" step="0.01" placeholder="Sí" />
        <input class="market-input" id="m_odd_btts_no" type="number" step="0.01" placeholder="No" />
      </div>

      <div class="row">
        <button id="modalAddPick" class="btn primary">Guardar</button>
        <button id="modalCancel" class="btn secondary">Cancelar</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js');
    }
  </script>
</body>
</html>
