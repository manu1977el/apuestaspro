<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Apuestas PRO</title>

  <!-- Estilos m√≠nimos para que se vea bien sin tu CSS -->
  <style>
    :root { color-scheme: dark; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background:#0b0b0c; color:#eee; }
    header { display:flex; gap:14px; align-items:center; padding:10px 14px; background:#111; border-bottom:1px solid #222; }
    .badge { padding:4px 8px; border-radius:12px; font-size:12px; background:#222; }
    .online  { background:#124b27 !important; color:#bff1c7 !important; }
    .offline { background:#4b1212 !important; color:#ffd6d6 !important; }
    nav { display:flex; gap:10px; padding:10px 14px; border-bottom:1px solid #1b1b1b; background:#101013; position:sticky; top:0; }
    nav button { background:#1b1b1f; color:#ddd; border:1px solid #2a2a2a; padding:10px 14px; border-radius:8px; }
    nav button.active { background:#2b66ff; border-color:#2b66ff; color:#fff; }
    main { padding:16px; max-width:900px; margin:0 auto; }
    section { margin-bottom:32px; }
    h2,h3,h4 { margin:10px 0 12px; }
    .card { background:#131316; border:1px solid #202025; border-radius:10px; padding:12px; }
    .row { display:flex; gap:10px; flex-wrap:wrap; }
    .row input, .row select { flex:1 1 200px; background:#0f0f12; color:#fff; border:1px solid #2a2a2a; border-radius:8px; padding:10px; }
    .btn { background:#2b66ff; color:#fff; border:0; padding:10px 14px; border-radius:8px; cursor:pointer; }
    .btn.secondary { background:#222; color:#ddd; border:1px solid #333; }
    /* Oculta la barra de estado de APIs si molesta mientras estamos offline */
    .header-status { display:none; } /* quita esta l√≠nea si quieres verla */
  </style>
</head>

<body>
  <!-- Cabecera -->
  <header>
    <strong>‚öΩ Apuestas PRO</strong>
    <div class="header-status">
      <span class="badge" id="status-api">API-Football</span>
      <span class="badge" id="status-odds">Odds</span>
    </div>
  </header>

  <!-- Pesta√±as -->
  <nav>
    <button id="tab-inicio" class="active">üè† Inicio</button>
    <button id="tab-picks">üìù Mis Picks</button>
  </nav>

  <main>
    <!-- P√°gina INICIO (contenidos libres; aqu√≠ dejo un creador manual simple) -->
    <section id="inicio">
      <h2>Crear pick manual</h2>
      <div class="card">
        <div class="row">
          <input id="mpHome" placeholder="Equipo local" />
          <input id="mpAway" placeholder="Equipo visitante" />
          <input id="mpOdd"  placeholder="Cuota (opcional)" inputmode="decimal" />
        </div>
        <div style="margin-top:12px; display:flex; gap:10px;">
          <button class="btn" id="add-pick">‚ûï A√±adir pick</button>
          <button class="btn secondary" id="fabRefresh" title="Refrescar">‚ü≥</button>
          <button class="btn secondary" id="fabGoPicks" title="Ir a Mis Picks">‚≠ê</button>
        </div>
        <p style="opacity:.7; margin-top:10px;">La probabilidad se calcula autom√°ticamente con la f√≥rmula
        <code>1 / cuota * 100</code> si introduces una cuota.</p>
      </div>
    </section>

    <!-- P√°gina MIS PICKS -->
    <section id="picks" style="display:none;">
      <h2>‚≠ê Mis Picks</h2>
      <div id="lista-picks" class="card">Cargando‚Ä¶</div>
    </section>
  </main>

  <!-- Scripts (orden correcto) -->
  <script src="config.js"></script>
  <script src="app.js?v=local-picks-3"></script>

  <!-- Pegatina de depuraci√≥n min√∫scula -->
  <div style="position:fixed;left:12px;bottom:10px;font-size:11px;opacity:.35;">v-local</div>

  <!-- Integraciones m√≠nimas para los botones extra (opcional) -->
  <script>
    // Ir a "Mis Picks" con el bot√≥n de la cabecera de Inicio
    document.getElementById('fabGoPicks')?.addEventListener('click', () => {
      document.getElementById('tab-picks')?.click();
    });

    // Refrescar lista en Mis Picks
    document.getElementById('fabRefresh')?.addEventListener('click', () => {
      // Si est√°s en Mis Picks, fuerzo un clic sobre la pesta√±a para re-renderizar
      const tabP = document.getElementById('tab-picks');
      if (!tabP) return;
      const wasActive = tabP.classList.contains('active');
      tabP.click();               // ir a Mis Picks
      if (!wasActive) {
        // volver a Inicio si antes no estaba activa
        setTimeout(() => document.getElementById('tab-inicio')?.click(), 250);
      }
    });

    // Si quieres que el bot√≥n "A√±adir pick" tome los valores de los inputs:
    const btnAdd = document.getElementById('add-pick');
    btnAdd?.addEventListener('click', () => {
      const home = (document.getElementById('mpHome')?.value || '').trim();
      const away = (document.getElementById('mpAway')?.value || '').trim();
      const odd  = (document.getElementById('mpOdd')?.value  || '').trim();
      if (!home || !away) {
        alert('Rellena local y visitante');
        return;
      }
      // Delega en app.js: √©ste tambi√©n escucha el bot√≥n y guarda por prompt;
      // aqu√≠ simulo prompt para usar el mismo flujo:
      const oldPrompt = window.prompt;
      window.prompt = (msg) => (msg.includes('Equipo local') ? home :
                                msg.includes('Equipo visitante') ? away :
                                msg.includes('Cuota') ? odd : '');
      try { btnAdd.dispatchEvent(new Event('click')); } catch {}
      finally { window.prompt = oldPrompt; }
      // Limpio los inputs
      document.getElementById('mpHome').value = '';
      document.getElementById('mpAway').value = '';
      document.getElementById('mpOdd').value  = '';
    }, { once: true }); // engancho una sola vez y dejo que app.js gestione despu√©s
  </script>
</body>
</html>
